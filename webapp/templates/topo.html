{% extends 'layout.html' %}
{% block body %}
<h1 style="font-size: 50px;"> Active Topology: {{topologyInfo['controller']}}</h1>

  
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdn.ckeditor.com/4.6.2/basic/ckeditor.js"></script>

    <div id="mynetwork"></div>

    <script type="text/javascript">
      CKEDITOR.replace('editor')
    </script>
    
    <script type="text/javascript">

        var nodes = new vis.DataSet([
            {% for device in topologyInfo['devices'] %}
            {% if loop.index != topologyInfo['devices']|length %}
            {% if "host" not in device %}
            {id: '{{device}}', label: '{{device}}', image: 'https://proxy.duckduckgo.com/iu/?u=https%3A%2F%2Fmaxcdn.icons8.com%2Fwindows8%2FPNG%2F512%2FNetwork%2Fswitch-512.png&f=1', shape: 'image'},
            {% elif "host" in device %}
            {id: '{{device}}', label: '{{device}}', image: 'https://proxy.duckduckgo.com/iu/?u=https%3A%2F%2Fd30y9cdsu7xlg0.cloudfront.net%2Fpng%2F11319-200.png&f=1', shape: 'image'},
            {% endif %}
            {% elif  loop.index == topologyInfo['devices']|length %}
            {% if "host" not in device %}
            {id: '{{device}}', label: '{{device}}', image: 'https://proxy.duckduckgo.com/iu/?u=https%3A%2F%2Fmaxcdn.icons8.com%2Fwindows8%2FPNG%2F512%2FNetwork%2Fswitch-512.png&f=1', shape: 'image'}
            {% elif "host" in device %}
            {id: '{{device}}', label: '{{device}}', image: 'https://proxy.duckduckgo.com/iu/?u=https%3A%2F%2Fd30y9cdsu7xlg0.cloudfront.net%2Fpng%2F11319-200.png&f=1', shape: 'image'}
            {% endif %}
            {% endif %}
            {% endfor %}
        ]);

        var edges = new vis.DataSet([
            {% for link in topologyInfo['connections'] %}
            {% if loop.index != topologyInfo['connections']|length %}
            {from: '{{link['src']}}', to: '{{link['dst']}}'},
            {% elif  loop.index == topologyInfo['connections']|length %}
            {from: '{{link['src']}}', to: '{{link['dst']}}'}
            {% endif %}
            {% endfor %}
        ]);
    
        // create a network
        var container = document.getElementById('mynetwork');
    
        // provide the data in the vis format
        var data = {
            nodes: nodes,
            edges: edges
        };
        var options = {};
    
        // initialize your network!
        var network = new vis.Network(container, data, options);

    </script>
{% endblock %}
 